{"ast":null,"code":"import { environment } from 'src/environments/environment';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/material/snack-bar\";\nimport * as i3 from \"@angular/router\";\nexport let AuthService = /*#__PURE__*/(() => {\n  class AuthService {\n    constructor(http, _snackBar, route) {\n      this.http = http;\n      this._snackBar = _snackBar;\n      this.route = route;\n      this.apiUrl = environment.apiUrl;\n      this.isAuth = false;\n    }\n    authAfterReferesh(isAuth, token) {\n      this.isAuth = isAuth;\n      this.token = token;\n    }\n    getToken() {\n      return this.token;\n    }\n    getIsAuth() {\n      return this.isAuth;\n    }\n    getUSerId() {\n      return this.userId;\n    }\n    getEmail() {\n      return this.emailAddress;\n    }\n    setEmail(email) {\n      localStorage.setItem('user_email', email);\n      this.emailAddress = email;\n    }\n    onSignUp(values) {\n      return new Promise((resolve, reject) => {\n        let body = {\n          name: values.name,\n          username: values.username,\n          email: values.gmail,\n          password: values.password,\n          categories: ['Transportation', 'Groceries', 'Entertainment', 'Unassigned']\n        };\n        this.http.post(this.apiUrl + 'api/v1/users/register', body).subscribe(res => {\n          if (res) {\n            this._snackBar.open('Expense Tracker Account Created SuccessFully', '', {\n              duration: 4000\n            });\n            this.token = res.data.accessToken;\n            this.userId = res.data.user._id;\n            this.setEmail(values.gmail);\n            this.isAuth = true;\n            this.saveAuthDataonLocalStorage(res.data.accessToken, res.data.user._id);\n            this.route.navigate(['dashboard']);\n            resolve(true);\n          }\n        }, error => {\n          const errorMessage = error.error?.message || 'Registration failed. Please try again.';\n          this._snackBar.open(errorMessage, '', {\n            duration: 5000\n          });\n          this.isAuth = false;\n          reject(error);\n        });\n      });\n    }\n    onLogin(body) {\n      return new Promise((resolve, reject) => {\n        // Convert gmail to email for new API\n        const loginBody = {\n          email: body.gmail,\n          password: body.password\n        };\n        this.http.post(this.apiUrl + 'api/v1/users/login', loginBody).subscribe(res => {\n          this._snackBar.open(res.message, '', {\n            duration: 3000\n          });\n          this.token = res.data.accessToken;\n          this.userId = res.data.user._id;\n          this.isAuth = true;\n          this.setEmail(res.data.user.email);\n          this.saveAuthDataonLocalStorage(res.data.accessToken, res.data.user._id);\n          this.route.navigate(['dashboard']);\n          resolve(true);\n        }, error => {\n          this._snackBar.open(error.error.message, '', {\n            duration: 3000\n          });\n          this.isAuth = false;\n          reject(error);\n        });\n      });\n    }\n    onLogout() {\n      this.token = null;\n      this.isAuth = false;\n      this.route.navigate(['welcome']);\n      clearTimeout(this.expireTokenTime);\n      sessionStorage.removeItem('LEAD_ID');\n      sessionStorage.removeItem('Id');\n      localStorage.removeItem('LEAD_ID');\n      localStorage.removeItem('Id');\n    }\n    saveAuthDataonLocalStorage(token, userId) {\n      const formattedUserId = \"954854384ubbbfhf9489r34r34fnnn \" + userId + \" id\";\n      sessionStorage.setItem('LEAD_ID', token);\n      sessionStorage.setItem('Id', formattedUserId);\n      localStorage.setItem('LEAD_ID', token);\n      localStorage.setItem('Id', formattedUserId);\n    }\n    deleteUserAccount() {\n      const token = sessionStorage.getItem('LEAD_ID') || localStorage.getItem('LEAD_ID');\n      const headers = {\n        'Authorization': `Bearer ${token}`,\n        'Content-Type': 'application/json'\n      };\n      return this.http.delete(this.apiUrl + 'api/v1/users/delete-account', {\n        headers\n      });\n    }\n    onGetAppVersion() {\n      return this.http.get(this.apiUrl + 'api/v1/users/app-version');\n    }\n    onCollectSource(body) {\n      return this.http.post(this.apiUrl + 'USER/USER_SOURCE/', body);\n    }\n    saveSource(email, action, source) {\n      let body = {\n        email: email,\n        source: source,\n        action: action,\n        createdAt: new Date()\n      };\n      this.onCollectSource(body).subscribe(res => {\n        // Source tracking saved\n      }), error => {\n        console.error(error);\n      };\n    }\n    onProvideFeedback(body) {\n      return this.http.post(this.apiUrl + 'USER/USER_FEEDBACK/', body);\n    }\n    onConfirmAccess(body) {\n      return this.http.post(this.apiUrl + 'USER/CONFIRM_ACCESS/', body);\n    }\n    updateUserData(id, body) {\n      // For now, just log the update - this can be implemented if needed\n      console.log('User data update requested:', id, body);\n    }\n  }\n  AuthService.ɵfac = function AuthService_Factory(t) {\n    return new (t || AuthService)(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.MatSnackBar), i0.ɵɵinject(i3.Router));\n  };\n  AuthService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: AuthService,\n    factory: AuthService.ɵfac,\n    providedIn: 'root'\n  });\n  return AuthService;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}